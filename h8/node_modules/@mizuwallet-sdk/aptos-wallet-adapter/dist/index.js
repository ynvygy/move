var sr = Object.defineProperty;
var cr = (A, a, o) => a in A ? sr(A, a, { enumerable: !0, configurable: !0, writable: !0, value: o }) : A[a] = o;
var te = (A, a, o) => cr(A, typeof a != "symbol" ? a + "" : a, o);
import { Network as _t, AccountAddress as xr } from "@aptos-labs/ts-sdk";
import { Mizu as hr } from "@mizuwallet-sdk/core";
var lr = "aptos:devnet", dr = "aptos:testnet", Ar = "aptos:localnet", ur = "aptos:mainnet", pr = [lr, dr, Ar, ur], tt = ((A) => (A[A.Unauthorized = 4100] = "Unauthorized", A[A.InternalError = -30001] = "InternalError", A))(tt || {}), Ft = Object.freeze({ 4100: { status: "Unauthorized", message: "The requested method and/or account has not been authorized by the user." }, [-30001]: { status: "Internal error", message: "Something went wrong within the wallet." } }), vt = class $t extends Error {
  constructor(a, o) {
    var h, d;
    super(o ?? ((h = Ft[a]) == null ? void 0 : h.message) ?? "Unknown error occurred"), this.code = a, this.status = ((d = Ft[a]) == null ? void 0 : d.status) ?? "Unknown error", this.name = "AptosWalletError", Object.setPrototypeOf(this, $t.prototype);
  }
}, Fe = ((A) => (A.APPROVED = "Approved", A.REJECTED = "Rejected", A))(Fe || {});
const gr = "https://t.me/mizuwallet_bot/mizuwallet", yr = "https://t.me/mizuwallet_bot/mizuwallet_testnet", wr = (A) => A === _t.TESTNET ? yr : gr, It = {
  CONNECT: "[Mizu Wallet Connection] ",
  TRANSACTION: "[Mizu Wallet Transaction] "
}, br = "07418a1b-9574-4449-bd34-2146db60b05c", vr = "0c460c1a-5175-4383-b1c2-35b934f5aa71", Er = (A) => A === _t.TESTNET ? vr : br, mr = "Mizu Wallet", Ur = "https://mizu.io", Ir = "data:image/png;base64,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";
var Br = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function Rr(A) {
  return A && A.__esModule && Object.prototype.hasOwnProperty.call(A, "default") ? A.default : A;
}
function Cr(A) {
  if (A.__esModule) return A;
  var a = A.default;
  if (typeof a == "function") {
    var o = function h() {
      return this instanceof h ? Reflect.construct(a, arguments, this.constructor) : a.apply(this, arguments);
    };
    o.prototype = a.prototype;
  } else o = {};
  return Object.defineProperty(o, "__esModule", { value: !0 }), Object.keys(A).forEach(function(h) {
    var d = Object.getOwnPropertyDescriptor(A, h);
    Object.defineProperty(o, h, d.get ? d : {
      enumerable: !0,
      get: function() {
        return A[h];
      }
    });
  }), o;
}
var Sr = { exports: {} };
(function(A) {
  (function(a, o) {
    A.exports ? A.exports = o() : (a.nacl || (a.nacl = {}), a.nacl.util = o());
  })(Br, function() {
    var a = {};
    function o(h) {
      if (!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(h))
        throw new TypeError("invalid encoding");
    }
    return a.decodeUTF8 = function(h) {
      if (typeof h != "string") throw new TypeError("expected string");
      var d, S = unescape(encodeURIComponent(h)), L = new Uint8Array(S.length);
      for (d = 0; d < S.length; d++) L[d] = S.charCodeAt(d);
      return L;
    }, a.encodeUTF8 = function(h) {
      var d, S = [];
      for (d = 0; d < h.length; d++) S.push(String.fromCharCode(h[d]));
      return decodeURIComponent(escape(S.join("")));
    }, typeof atob > "u" ? typeof Buffer.from < "u" ? (a.encodeBase64 = function(h) {
      return Buffer.from(h).toString("base64");
    }, a.decodeBase64 = function(h) {
      return o(h), new Uint8Array(Array.prototype.slice.call(Buffer.from(h, "base64"), 0));
    }) : (a.encodeBase64 = function(h) {
      return new Buffer(h).toString("base64");
    }, a.decodeBase64 = function(h) {
      return o(h), new Uint8Array(Array.prototype.slice.call(new Buffer(h, "base64"), 0));
    }) : (a.encodeBase64 = function(h) {
      var d, S = [], L = h.length;
      for (d = 0; d < L; d++) S.push(String.fromCharCode(h[d]));
      return btoa(S.join(""));
    }, a.decodeBase64 = function(h) {
      o(h);
      var d, S = atob(h), L = new Uint8Array(S.length);
      for (d = 0; d < S.length; d++) L[d] = S.charCodeAt(d);
      return L;
    }), a;
  });
})(Sr);
function Or(A) {
  throw new Error('Could not dynamically require "' + A + '". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
}
var er = { exports: {} };
const Nr = {}, Lr = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: Nr
}, Symbol.toStringTag, { value: "Module" })), Tr = /* @__PURE__ */ Cr(Lr);
(function(A) {
  (function(a) {
    var o = function(t) {
      var f, r = new Float64Array(16);
      if (t) for (f = 0; f < t.length; f++) r[f] = t[f];
      return r;
    }, h = function() {
      throw new Error("no PRNG");
    }, d = new Uint8Array(16), S = new Uint8Array(32);
    S[0] = 9;
    var L = o(), D = o([1]), q = o([56129, 1]), $ = o([30883, 4953, 19914, 30187, 55467, 16705, 2637, 112, 59544, 30585, 16505, 36039, 65139, 11119, 27886, 20995]), oe = o([61785, 9906, 39828, 60374, 45398, 33411, 5274, 224, 53552, 61171, 33010, 6542, 64743, 22239, 55772, 9222]), be = o([54554, 36645, 11616, 51542, 42930, 38181, 51040, 26924, 56412, 64982, 57905, 49316, 21502, 52590, 14035, 8553]), Ie = o([26200, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214]), ue = o([41136, 18958, 6951, 50414, 58488, 44335, 6150, 12099, 55207, 15867, 153, 11085, 57099, 20417, 9344, 11139]);
    function de(t, f, r, e) {
      t[f] = r >> 24 & 255, t[f + 1] = r >> 16 & 255, t[f + 2] = r >> 8 & 255, t[f + 3] = r & 255, t[f + 4] = e >> 24 & 255, t[f + 5] = e >> 16 & 255, t[f + 6] = e >> 8 & 255, t[f + 7] = e & 255;
    }
    function Ne(t, f, r, e, n) {
      var s, c = 0;
      for (s = 0; s < n; s++) c |= t[f + s] ^ r[e + s];
      return (1 & c - 1 >>> 8) - 1;
    }
    function De(t, f, r, e) {
      return Ne(t, f, r, e, 16);
    }
    function Be(t, f, r, e) {
      return Ne(t, f, r, e, 32);
    }
    function je(t, f, r, e) {
      for (var n = e[0] & 255 | (e[1] & 255) << 8 | (e[2] & 255) << 16 | (e[3] & 255) << 24, s = r[0] & 255 | (r[1] & 255) << 8 | (r[2] & 255) << 16 | (r[3] & 255) << 24, c = r[4] & 255 | (r[5] & 255) << 8 | (r[6] & 255) << 16 | (r[7] & 255) << 24, p = r[8] & 255 | (r[9] & 255) << 8 | (r[10] & 255) << 16 | (r[11] & 255) << 24, b = r[12] & 255 | (r[13] & 255) << 8 | (r[14] & 255) << 16 | (r[15] & 255) << 24, C = e[4] & 255 | (e[5] & 255) << 8 | (e[6] & 255) << 16 | (e[7] & 255) << 24, E = f[0] & 255 | (f[1] & 255) << 8 | (f[2] & 255) << 16 | (f[3] & 255) << 24, V = f[4] & 255 | (f[5] & 255) << 8 | (f[6] & 255) << 16 | (f[7] & 255) << 24, U = f[8] & 255 | (f[9] & 255) << 8 | (f[10] & 255) << 16 | (f[11] & 255) << 24, T = f[12] & 255 | (f[13] & 255) << 8 | (f[14] & 255) << 16 | (f[15] & 255) << 24, k = e[8] & 255 | (e[9] & 255) << 8 | (e[10] & 255) << 16 | (e[11] & 255) << 24, K = r[16] & 255 | (r[17] & 255) << 8 | (r[18] & 255) << 16 | (r[19] & 255) << 24, j = r[20] & 255 | (r[21] & 255) << 8 | (r[22] & 255) << 16 | (r[23] & 255) << 24, P = r[24] & 255 | (r[25] & 255) << 8 | (r[26] & 255) << 16 | (r[27] & 255) << 24, Q = r[28] & 255 | (r[29] & 255) << 8 | (r[30] & 255) << 16 | (r[31] & 255) << 24, M = e[12] & 255 | (e[13] & 255) << 8 | (e[14] & 255) << 16 | (e[15] & 255) << 24, I = n, O = s, m = c, B = p, R = b, v = C, x = E, l = V, y = U, u = T, g = k, w = K, N = j, Y = P, z = Q, H = M, i, J = 0; J < 20; J += 2)
        i = I + N | 0, R ^= i << 7 | i >>> 25, i = R + I | 0, y ^= i << 9 | i >>> 23, i = y + R | 0, N ^= i << 13 | i >>> 19, i = N + y | 0, I ^= i << 18 | i >>> 14, i = v + O | 0, u ^= i << 7 | i >>> 25, i = u + v | 0, Y ^= i << 9 | i >>> 23, i = Y + u | 0, O ^= i << 13 | i >>> 19, i = O + Y | 0, v ^= i << 18 | i >>> 14, i = g + x | 0, z ^= i << 7 | i >>> 25, i = z + g | 0, m ^= i << 9 | i >>> 23, i = m + z | 0, x ^= i << 13 | i >>> 19, i = x + m | 0, g ^= i << 18 | i >>> 14, i = H + w | 0, B ^= i << 7 | i >>> 25, i = B + H | 0, l ^= i << 9 | i >>> 23, i = l + B | 0, w ^= i << 13 | i >>> 19, i = w + l | 0, H ^= i << 18 | i >>> 14, i = I + B | 0, O ^= i << 7 | i >>> 25, i = O + I | 0, m ^= i << 9 | i >>> 23, i = m + O | 0, B ^= i << 13 | i >>> 19, i = B + m | 0, I ^= i << 18 | i >>> 14, i = v + R | 0, x ^= i << 7 | i >>> 25, i = x + v | 0, l ^= i << 9 | i >>> 23, i = l + x | 0, R ^= i << 13 | i >>> 19, i = R + l | 0, v ^= i << 18 | i >>> 14, i = g + u | 0, w ^= i << 7 | i >>> 25, i = w + g | 0, y ^= i << 9 | i >>> 23, i = y + w | 0, u ^= i << 13 | i >>> 19, i = u + y | 0, g ^= i << 18 | i >>> 14, i = H + z | 0, N ^= i << 7 | i >>> 25, i = N + H | 0, Y ^= i << 9 | i >>> 23, i = Y + N | 0, z ^= i << 13 | i >>> 19, i = z + Y | 0, H ^= i << 18 | i >>> 14;
      I = I + n | 0, O = O + s | 0, m = m + c | 0, B = B + p | 0, R = R + b | 0, v = v + C | 0, x = x + E | 0, l = l + V | 0, y = y + U | 0, u = u + T | 0, g = g + k | 0, w = w + K | 0, N = N + j | 0, Y = Y + P | 0, z = z + Q | 0, H = H + M | 0, t[0] = I >>> 0 & 255, t[1] = I >>> 8 & 255, t[2] = I >>> 16 & 255, t[3] = I >>> 24 & 255, t[4] = O >>> 0 & 255, t[5] = O >>> 8 & 255, t[6] = O >>> 16 & 255, t[7] = O >>> 24 & 255, t[8] = m >>> 0 & 255, t[9] = m >>> 8 & 255, t[10] = m >>> 16 & 255, t[11] = m >>> 24 & 255, t[12] = B >>> 0 & 255, t[13] = B >>> 8 & 255, t[14] = B >>> 16 & 255, t[15] = B >>> 24 & 255, t[16] = R >>> 0 & 255, t[17] = R >>> 8 & 255, t[18] = R >>> 16 & 255, t[19] = R >>> 24 & 255, t[20] = v >>> 0 & 255, t[21] = v >>> 8 & 255, t[22] = v >>> 16 & 255, t[23] = v >>> 24 & 255, t[24] = x >>> 0 & 255, t[25] = x >>> 8 & 255, t[26] = x >>> 16 & 255, t[27] = x >>> 24 & 255, t[28] = l >>> 0 & 255, t[29] = l >>> 8 & 255, t[30] = l >>> 16 & 255, t[31] = l >>> 24 & 255, t[32] = y >>> 0 & 255, t[33] = y >>> 8 & 255, t[34] = y >>> 16 & 255, t[35] = y >>> 24 & 255, t[36] = u >>> 0 & 255, t[37] = u >>> 8 & 255, t[38] = u >>> 16 & 255, t[39] = u >>> 24 & 255, t[40] = g >>> 0 & 255, t[41] = g >>> 8 & 255, t[42] = g >>> 16 & 255, t[43] = g >>> 24 & 255, t[44] = w >>> 0 & 255, t[45] = w >>> 8 & 255, t[46] = w >>> 16 & 255, t[47] = w >>> 24 & 255, t[48] = N >>> 0 & 255, t[49] = N >>> 8 & 255, t[50] = N >>> 16 & 255, t[51] = N >>> 24 & 255, t[52] = Y >>> 0 & 255, t[53] = Y >>> 8 & 255, t[54] = Y >>> 16 & 255, t[55] = Y >>> 24 & 255, t[56] = z >>> 0 & 255, t[57] = z >>> 8 & 255, t[58] = z >>> 16 & 255, t[59] = z >>> 24 & 255, t[60] = H >>> 0 & 255, t[61] = H >>> 8 & 255, t[62] = H >>> 16 & 255, t[63] = H >>> 24 & 255;
    }
    function nt(t, f, r, e) {
      for (var n = e[0] & 255 | (e[1] & 255) << 8 | (e[2] & 255) << 16 | (e[3] & 255) << 24, s = r[0] & 255 | (r[1] & 255) << 8 | (r[2] & 255) << 16 | (r[3] & 255) << 24, c = r[4] & 255 | (r[5] & 255) << 8 | (r[6] & 255) << 16 | (r[7] & 255) << 24, p = r[8] & 255 | (r[9] & 255) << 8 | (r[10] & 255) << 16 | (r[11] & 255) << 24, b = r[12] & 255 | (r[13] & 255) << 8 | (r[14] & 255) << 16 | (r[15] & 255) << 24, C = e[4] & 255 | (e[5] & 255) << 8 | (e[6] & 255) << 16 | (e[7] & 255) << 24, E = f[0] & 255 | (f[1] & 255) << 8 | (f[2] & 255) << 16 | (f[3] & 255) << 24, V = f[4] & 255 | (f[5] & 255) << 8 | (f[6] & 255) << 16 | (f[7] & 255) << 24, U = f[8] & 255 | (f[9] & 255) << 8 | (f[10] & 255) << 16 | (f[11] & 255) << 24, T = f[12] & 255 | (f[13] & 255) << 8 | (f[14] & 255) << 16 | (f[15] & 255) << 24, k = e[8] & 255 | (e[9] & 255) << 8 | (e[10] & 255) << 16 | (e[11] & 255) << 24, K = r[16] & 255 | (r[17] & 255) << 8 | (r[18] & 255) << 16 | (r[19] & 255) << 24, j = r[20] & 255 | (r[21] & 255) << 8 | (r[22] & 255) << 16 | (r[23] & 255) << 24, P = r[24] & 255 | (r[25] & 255) << 8 | (r[26] & 255) << 16 | (r[27] & 255) << 24, Q = r[28] & 255 | (r[29] & 255) << 8 | (r[30] & 255) << 16 | (r[31] & 255) << 24, M = e[12] & 255 | (e[13] & 255) << 8 | (e[14] & 255) << 16 | (e[15] & 255) << 24, I = n, O = s, m = c, B = p, R = b, v = C, x = E, l = V, y = U, u = T, g = k, w = K, N = j, Y = P, z = Q, H = M, i, J = 0; J < 20; J += 2)
        i = I + N | 0, R ^= i << 7 | i >>> 25, i = R + I | 0, y ^= i << 9 | i >>> 23, i = y + R | 0, N ^= i << 13 | i >>> 19, i = N + y | 0, I ^= i << 18 | i >>> 14, i = v + O | 0, u ^= i << 7 | i >>> 25, i = u + v | 0, Y ^= i << 9 | i >>> 23, i = Y + u | 0, O ^= i << 13 | i >>> 19, i = O + Y | 0, v ^= i << 18 | i >>> 14, i = g + x | 0, z ^= i << 7 | i >>> 25, i = z + g | 0, m ^= i << 9 | i >>> 23, i = m + z | 0, x ^= i << 13 | i >>> 19, i = x + m | 0, g ^= i << 18 | i >>> 14, i = H + w | 0, B ^= i << 7 | i >>> 25, i = B + H | 0, l ^= i << 9 | i >>> 23, i = l + B | 0, w ^= i << 13 | i >>> 19, i = w + l | 0, H ^= i << 18 | i >>> 14, i = I + B | 0, O ^= i << 7 | i >>> 25, i = O + I | 0, m ^= i << 9 | i >>> 23, i = m + O | 0, B ^= i << 13 | i >>> 19, i = B + m | 0, I ^= i << 18 | i >>> 14, i = v + R | 0, x ^= i << 7 | i >>> 25, i = x + v | 0, l ^= i << 9 | i >>> 23, i = l + x | 0, R ^= i << 13 | i >>> 19, i = R + l | 0, v ^= i << 18 | i >>> 14, i = g + u | 0, w ^= i << 7 | i >>> 25, i = w + g | 0, y ^= i << 9 | i >>> 23, i = y + w | 0, u ^= i << 13 | i >>> 19, i = u + y | 0, g ^= i << 18 | i >>> 14, i = H + z | 0, N ^= i << 7 | i >>> 25, i = N + H | 0, Y ^= i << 9 | i >>> 23, i = Y + N | 0, z ^= i << 13 | i >>> 19, i = z + Y | 0, H ^= i << 18 | i >>> 14;
      t[0] = I >>> 0 & 255, t[1] = I >>> 8 & 255, t[2] = I >>> 16 & 255, t[3] = I >>> 24 & 255, t[4] = v >>> 0 & 255, t[5] = v >>> 8 & 255, t[6] = v >>> 16 & 255, t[7] = v >>> 24 & 255, t[8] = g >>> 0 & 255, t[9] = g >>> 8 & 255, t[10] = g >>> 16 & 255, t[11] = g >>> 24 & 255, t[12] = H >>> 0 & 255, t[13] = H >>> 8 & 255, t[14] = H >>> 16 & 255, t[15] = H >>> 24 & 255, t[16] = x >>> 0 & 255, t[17] = x >>> 8 & 255, t[18] = x >>> 16 & 255, t[19] = x >>> 24 & 255, t[20] = l >>> 0 & 255, t[21] = l >>> 8 & 255, t[22] = l >>> 16 & 255, t[23] = l >>> 24 & 255, t[24] = y >>> 0 & 255, t[25] = y >>> 8 & 255, t[26] = y >>> 16 & 255, t[27] = y >>> 24 & 255, t[28] = u >>> 0 & 255, t[29] = u >>> 8 & 255, t[30] = u >>> 16 & 255, t[31] = u >>> 24 & 255;
    }
    function Le(t, f, r, e) {
      je(t, f, r, e);
    }
    function Ue(t, f, r, e) {
      nt(t, f, r, e);
    }
    var pe = new Uint8Array([101, 120, 112, 97, 110, 100, 32, 51, 50, 45, 98, 121, 116, 101, 32, 107]);
    function Re(t, f, r, e, n, s, c) {
      var p = new Uint8Array(16), b = new Uint8Array(64), C, E;
      for (E = 0; E < 16; E++) p[E] = 0;
      for (E = 0; E < 8; E++) p[E] = s[E];
      for (; n >= 64; ) {
        for (Le(b, p, c, pe), E = 0; E < 64; E++) t[f + E] = r[e + E] ^ b[E];
        for (C = 1, E = 8; E < 16; E++)
          C = C + (p[E] & 255) | 0, p[E] = C & 255, C >>>= 8;
        n -= 64, f += 64, e += 64;
      }
      if (n > 0)
        for (Le(b, p, c, pe), E = 0; E < n; E++) t[f + E] = r[e + E] ^ b[E];
      return 0;
    }
    function ge(t, f, r, e, n) {
      var s = new Uint8Array(16), c = new Uint8Array(64), p, b;
      for (b = 0; b < 16; b++) s[b] = 0;
      for (b = 0; b < 8; b++) s[b] = e[b];
      for (; r >= 64; ) {
        for (Le(c, s, n, pe), b = 0; b < 64; b++) t[f + b] = c[b];
        for (p = 1, b = 8; b < 16; b++)
          p = p + (s[b] & 255) | 0, s[b] = p & 255, p >>>= 8;
        r -= 64, f += 64;
      }
      if (r > 0)
        for (Le(c, s, n, pe), b = 0; b < r; b++) t[f + b] = c[b];
      return 0;
    }
    function St(t, f, r, e, n) {
      var s = new Uint8Array(32);
      Ue(s, e, n, pe);
      for (var c = new Uint8Array(8), p = 0; p < 8; p++) c[p] = e[p + 16];
      return ge(t, f, r, c, s);
    }
    function it(t, f, r, e, n, s, c) {
      var p = new Uint8Array(32);
      Ue(p, s, c, pe);
      for (var b = new Uint8Array(8), C = 0; C < 8; C++) b[C] = s[C + 16];
      return Re(t, f, r, e, n, b, p);
    }
    var Je = function(t) {
      this.buffer = new Uint8Array(16), this.r = new Uint16Array(10), this.h = new Uint16Array(10), this.pad = new Uint16Array(8), this.leftover = 0, this.fin = 0;
      var f, r, e, n, s, c, p, b;
      f = t[0] & 255 | (t[1] & 255) << 8, this.r[0] = f & 8191, r = t[2] & 255 | (t[3] & 255) << 8, this.r[1] = (f >>> 13 | r << 3) & 8191, e = t[4] & 255 | (t[5] & 255) << 8, this.r[2] = (r >>> 10 | e << 6) & 7939, n = t[6] & 255 | (t[7] & 255) << 8, this.r[3] = (e >>> 7 | n << 9) & 8191, s = t[8] & 255 | (t[9] & 255) << 8, this.r[4] = (n >>> 4 | s << 12) & 255, this.r[5] = s >>> 1 & 8190, c = t[10] & 255 | (t[11] & 255) << 8, this.r[6] = (s >>> 14 | c << 2) & 8191, p = t[12] & 255 | (t[13] & 255) << 8, this.r[7] = (c >>> 11 | p << 5) & 8065, b = t[14] & 255 | (t[15] & 255) << 8, this.r[8] = (p >>> 8 | b << 8) & 8191, this.r[9] = b >>> 5 & 127, this.pad[0] = t[16] & 255 | (t[17] & 255) << 8, this.pad[1] = t[18] & 255 | (t[19] & 255) << 8, this.pad[2] = t[20] & 255 | (t[21] & 255) << 8, this.pad[3] = t[22] & 255 | (t[23] & 255) << 8, this.pad[4] = t[24] & 255 | (t[25] & 255) << 8, this.pad[5] = t[26] & 255 | (t[27] & 255) << 8, this.pad[6] = t[28] & 255 | (t[29] & 255) << 8, this.pad[7] = t[30] & 255 | (t[31] & 255) << 8;
    };
    Je.prototype.blocks = function(t, f, r) {
      for (var e = this.fin ? 0 : 2048, n, s, c, p, b, C, E, V, U, T, k, K, j, P, Q, M, I, O, m, B = this.h[0], R = this.h[1], v = this.h[2], x = this.h[3], l = this.h[4], y = this.h[5], u = this.h[6], g = this.h[7], w = this.h[8], N = this.h[9], Y = this.r[0], z = this.r[1], H = this.r[2], i = this.r[3], J = this.r[4], X = this.r[5], _ = this.r[6], F = this.r[7], W = this.r[8], G = this.r[9]; r >= 16; )
        n = t[f + 0] & 255 | (t[f + 1] & 255) << 8, B += n & 8191, s = t[f + 2] & 255 | (t[f + 3] & 255) << 8, R += (n >>> 13 | s << 3) & 8191, c = t[f + 4] & 255 | (t[f + 5] & 255) << 8, v += (s >>> 10 | c << 6) & 8191, p = t[f + 6] & 255 | (t[f + 7] & 255) << 8, x += (c >>> 7 | p << 9) & 8191, b = t[f + 8] & 255 | (t[f + 9] & 255) << 8, l += (p >>> 4 | b << 12) & 8191, y += b >>> 1 & 8191, C = t[f + 10] & 255 | (t[f + 11] & 255) << 8, u += (b >>> 14 | C << 2) & 8191, E = t[f + 12] & 255 | (t[f + 13] & 255) << 8, g += (C >>> 11 | E << 5) & 8191, V = t[f + 14] & 255 | (t[f + 15] & 255) << 8, w += (E >>> 8 | V << 8) & 8191, N += V >>> 5 | e, U = 0, T = U, T += B * Y, T += R * (5 * G), T += v * (5 * W), T += x * (5 * F), T += l * (5 * _), U = T >>> 13, T &= 8191, T += y * (5 * X), T += u * (5 * J), T += g * (5 * i), T += w * (5 * H), T += N * (5 * z), U += T >>> 13, T &= 8191, k = U, k += B * z, k += R * Y, k += v * (5 * G), k += x * (5 * W), k += l * (5 * F), U = k >>> 13, k &= 8191, k += y * (5 * _), k += u * (5 * X), k += g * (5 * J), k += w * (5 * i), k += N * (5 * H), U += k >>> 13, k &= 8191, K = U, K += B * H, K += R * z, K += v * Y, K += x * (5 * G), K += l * (5 * W), U = K >>> 13, K &= 8191, K += y * (5 * F), K += u * (5 * _), K += g * (5 * X), K += w * (5 * J), K += N * (5 * i), U += K >>> 13, K &= 8191, j = U, j += B * i, j += R * H, j += v * z, j += x * Y, j += l * (5 * G), U = j >>> 13, j &= 8191, j += y * (5 * W), j += u * (5 * F), j += g * (5 * _), j += w * (5 * X), j += N * (5 * J), U += j >>> 13, j &= 8191, P = U, P += B * J, P += R * i, P += v * H, P += x * z, P += l * Y, U = P >>> 13, P &= 8191, P += y * (5 * G), P += u * (5 * W), P += g * (5 * F), P += w * (5 * _), P += N * (5 * X), U += P >>> 13, P &= 8191, Q = U, Q += B * X, Q += R * J, Q += v * i, Q += x * H, Q += l * z, U = Q >>> 13, Q &= 8191, Q += y * Y, Q += u * (5 * G), Q += g * (5 * W), Q += w * (5 * F), Q += N * (5 * _), U += Q >>> 13, Q &= 8191, M = U, M += B * _, M += R * X, M += v * J, M += x * i, M += l * H, U = M >>> 13, M &= 8191, M += y * z, M += u * Y, M += g * (5 * G), M += w * (5 * W), M += N * (5 * F), U += M >>> 13, M &= 8191, I = U, I += B * F, I += R * _, I += v * X, I += x * J, I += l * i, U = I >>> 13, I &= 8191, I += y * H, I += u * z, I += g * Y, I += w * (5 * G), I += N * (5 * W), U += I >>> 13, I &= 8191, O = U, O += B * W, O += R * F, O += v * _, O += x * X, O += l * J, U = O >>> 13, O &= 8191, O += y * i, O += u * H, O += g * z, O += w * Y, O += N * (5 * G), U += O >>> 13, O &= 8191, m = U, m += B * G, m += R * W, m += v * F, m += x * _, m += l * X, U = m >>> 13, m &= 8191, m += y * J, m += u * i, m += g * H, m += w * z, m += N * Y, U += m >>> 13, m &= 8191, U = (U << 2) + U | 0, U = U + T | 0, T = U & 8191, U = U >>> 13, k += U, B = T, R = k, v = K, x = j, l = P, y = Q, u = M, g = I, w = O, N = m, f += 16, r -= 16;
      this.h[0] = B, this.h[1] = R, this.h[2] = v, this.h[3] = x, this.h[4] = l, this.h[5] = y, this.h[6] = u, this.h[7] = g, this.h[8] = w, this.h[9] = N;
    }, Je.prototype.finish = function(t, f) {
      var r = new Uint16Array(10), e, n, s, c;
      if (this.leftover) {
        for (c = this.leftover, this.buffer[c++] = 1; c < 16; c++) this.buffer[c] = 0;
        this.fin = 1, this.blocks(this.buffer, 0, 16);
      }
      for (e = this.h[1] >>> 13, this.h[1] &= 8191, c = 2; c < 10; c++)
        this.h[c] += e, e = this.h[c] >>> 13, this.h[c] &= 8191;
      for (this.h[0] += e * 5, e = this.h[0] >>> 13, this.h[0] &= 8191, this.h[1] += e, e = this.h[1] >>> 13, this.h[1] &= 8191, this.h[2] += e, r[0] = this.h[0] + 5, e = r[0] >>> 13, r[0] &= 8191, c = 1; c < 10; c++)
        r[c] = this.h[c] + e, e = r[c] >>> 13, r[c] &= 8191;
      for (r[9] -= 8192, n = (e ^ 1) - 1, c = 0; c < 10; c++) r[c] &= n;
      for (n = ~n, c = 0; c < 10; c++) this.h[c] = this.h[c] & n | r[c];
      for (this.h[0] = (this.h[0] | this.h[1] << 13) & 65535, this.h[1] = (this.h[1] >>> 3 | this.h[2] << 10) & 65535, this.h[2] = (this.h[2] >>> 6 | this.h[3] << 7) & 65535, this.h[3] = (this.h[3] >>> 9 | this.h[4] << 4) & 65535, this.h[4] = (this.h[4] >>> 12 | this.h[5] << 1 | this.h[6] << 14) & 65535, this.h[5] = (this.h[6] >>> 2 | this.h[7] << 11) & 65535, this.h[6] = (this.h[7] >>> 5 | this.h[8] << 8) & 65535, this.h[7] = (this.h[8] >>> 8 | this.h[9] << 5) & 65535, s = this.h[0] + this.pad[0], this.h[0] = s & 65535, c = 1; c < 8; c++)
        s = (this.h[c] + this.pad[c] | 0) + (s >>> 16) | 0, this.h[c] = s & 65535;
      t[f + 0] = this.h[0] >>> 0 & 255, t[f + 1] = this.h[0] >>> 8 & 255, t[f + 2] = this.h[1] >>> 0 & 255, t[f + 3] = this.h[1] >>> 8 & 255, t[f + 4] = this.h[2] >>> 0 & 255, t[f + 5] = this.h[2] >>> 8 & 255, t[f + 6] = this.h[3] >>> 0 & 255, t[f + 7] = this.h[3] >>> 8 & 255, t[f + 8] = this.h[4] >>> 0 & 255, t[f + 9] = this.h[4] >>> 8 & 255, t[f + 10] = this.h[5] >>> 0 & 255, t[f + 11] = this.h[5] >>> 8 & 255, t[f + 12] = this.h[6] >>> 0 & 255, t[f + 13] = this.h[6] >>> 8 & 255, t[f + 14] = this.h[7] >>> 0 & 255, t[f + 15] = this.h[7] >>> 8 & 255;
    }, Je.prototype.update = function(t, f, r) {
      var e, n;
      if (this.leftover) {
        for (n = 16 - this.leftover, n > r && (n = r), e = 0; e < n; e++)
          this.buffer[this.leftover + e] = t[f + e];
        if (r -= n, f += n, this.leftover += n, this.leftover < 16)
          return;
        this.blocks(this.buffer, 0, 16), this.leftover = 0;
      }
      if (r >= 16 && (n = r - r % 16, this.blocks(t, f, n), f += n, r -= n), r) {
        for (e = 0; e < r; e++)
          this.buffer[this.leftover + e] = t[f + e];
        this.leftover += r;
      }
    };
    function at(t, f, r, e, n, s) {
      var c = new Je(s);
      return c.update(r, e, n), c.finish(t, f), 0;
    }
    function Ot(t, f, r, e, n, s) {
      var c = new Uint8Array(16);
      return at(c, 0, r, e, n, s), De(t, f, c, 0);
    }
    function ot(t, f, r, e, n) {
      var s;
      if (r < 32) return -1;
      for (it(t, 0, f, 0, r, e, n), at(t, 16, t, 32, r - 32, t), s = 0; s < 16; s++) t[s] = 0;
      return 0;
    }
    function st(t, f, r, e, n) {
      var s, c = new Uint8Array(32);
      if (r < 32 || (St(c, 0, 32, e, n), Ot(f, 16, f, 32, r - 32, c) !== 0)) return -1;
      for (it(t, 0, f, 0, r, e, n), s = 0; s < 32; s++) t[s] = 0;
      return 0;
    }
    function Ee(t, f) {
      var r;
      for (r = 0; r < 16; r++) t[r] = f[r] | 0;
    }
    function ct(t) {
      var f, r, e = 1;
      for (f = 0; f < 16; f++)
        r = t[f] + e + 65535, e = Math.floor(r / 65536), t[f] = r - e * 65536;
      t[0] += e - 1 + 37 * (e - 1);
    }
    function Te(t, f, r) {
      for (var e, n = ~(r - 1), s = 0; s < 16; s++)
        e = n & (t[s] ^ f[s]), t[s] ^= e, f[s] ^= e;
    }
    function ke(t, f) {
      var r, e, n, s = o(), c = o();
      for (r = 0; r < 16; r++) c[r] = f[r];
      for (ct(c), ct(c), ct(c), e = 0; e < 2; e++) {
        for (s[0] = c[0] - 65517, r = 1; r < 15; r++)
          s[r] = c[r] - 65535 - (s[r - 1] >> 16 & 1), s[r - 1] &= 65535;
        s[15] = c[15] - 32767 - (s[14] >> 16 & 1), n = s[15] >> 16 & 1, s[14] &= 65535, Te(c, s, 1 - n);
      }
      for (r = 0; r < 16; r++)
        t[2 * r] = c[r] & 255, t[2 * r + 1] = c[r] >> 8;
    }
    function Nt(t, f) {
      var r = new Uint8Array(32), e = new Uint8Array(32);
      return ke(r, t), ke(e, f), Be(r, 0, e, 0);
    }
    function Lt(t) {
      var f = new Uint8Array(32);
      return ke(f, t), f[0] & 1;
    }
    function xt(t, f) {
      var r;
      for (r = 0; r < 16; r++) t[r] = f[2 * r] + (f[2 * r + 1] << 8);
      t[15] &= 32767;
    }
    function ye(t, f, r) {
      for (var e = 0; e < 16; e++) t[e] = f[e] + r[e];
    }
    function we(t, f, r) {
      for (var e = 0; e < 16; e++) t[e] = f[e] - r[e];
    }
    function Z(t, f, r) {
      var e, n, s = 0, c = 0, p = 0, b = 0, C = 0, E = 0, V = 0, U = 0, T = 0, k = 0, K = 0, j = 0, P = 0, Q = 0, M = 0, I = 0, O = 0, m = 0, B = 0, R = 0, v = 0, x = 0, l = 0, y = 0, u = 0, g = 0, w = 0, N = 0, Y = 0, z = 0, H = 0, i = r[0], J = r[1], X = r[2], _ = r[3], F = r[4], W = r[5], G = r[6], ie = r[7], ee = r[8], re = r[9], fe = r[10], ne = r[11], ae = r[12], ce = r[13], xe = r[14], he = r[15];
      e = f[0], s += e * i, c += e * J, p += e * X, b += e * _, C += e * F, E += e * W, V += e * G, U += e * ie, T += e * ee, k += e * re, K += e * fe, j += e * ne, P += e * ae, Q += e * ce, M += e * xe, I += e * he, e = f[1], c += e * i, p += e * J, b += e * X, C += e * _, E += e * F, V += e * W, U += e * G, T += e * ie, k += e * ee, K += e * re, j += e * fe, P += e * ne, Q += e * ae, M += e * ce, I += e * xe, O += e * he, e = f[2], p += e * i, b += e * J, C += e * X, E += e * _, V += e * F, U += e * W, T += e * G, k += e * ie, K += e * ee, j += e * re, P += e * fe, Q += e * ne, M += e * ae, I += e * ce, O += e * xe, m += e * he, e = f[3], b += e * i, C += e * J, E += e * X, V += e * _, U += e * F, T += e * W, k += e * G, K += e * ie, j += e * ee, P += e * re, Q += e * fe, M += e * ne, I += e * ae, O += e * ce, m += e * xe, B += e * he, e = f[4], C += e * i, E += e * J, V += e * X, U += e * _, T += e * F, k += e * W, K += e * G, j += e * ie, P += e * ee, Q += e * re, M += e * fe, I += e * ne, O += e * ae, m += e * ce, B += e * xe, R += e * he, e = f[5], E += e * i, V += e * J, U += e * X, T += e * _, k += e * F, K += e * W, j += e * G, P += e * ie, Q += e * ee, M += e * re, I += e * fe, O += e * ne, m += e * ae, B += e * ce, R += e * xe, v += e * he, e = f[6], V += e * i, U += e * J, T += e * X, k += e * _, K += e * F, j += e * W, P += e * G, Q += e * ie, M += e * ee, I += e * re, O += e * fe, m += e * ne, B += e * ae, R += e * ce, v += e * xe, x += e * he, e = f[7], U += e * i, T += e * J, k += e * X, K += e * _, j += e * F, P += e * W, Q += e * G, M += e * ie, I += e * ee, O += e * re, m += e * fe, B += e * ne, R += e * ae, v += e * ce, x += e * xe, l += e * he, e = f[8], T += e * i, k += e * J, K += e * X, j += e * _, P += e * F, Q += e * W, M += e * G, I += e * ie, O += e * ee, m += e * re, B += e * fe, R += e * ne, v += e * ae, x += e * ce, l += e * xe, y += e * he, e = f[9], k += e * i, K += e * J, j += e * X, P += e * _, Q += e * F, M += e * W, I += e * G, O += e * ie, m += e * ee, B += e * re, R += e * fe, v += e * ne, x += e * ae, l += e * ce, y += e * xe, u += e * he, e = f[10], K += e * i, j += e * J, P += e * X, Q += e * _, M += e * F, I += e * W, O += e * G, m += e * ie, B += e * ee, R += e * re, v += e * fe, x += e * ne, l += e * ae, y += e * ce, u += e * xe, g += e * he, e = f[11], j += e * i, P += e * J, Q += e * X, M += e * _, I += e * F, O += e * W, m += e * G, B += e * ie, R += e * ee, v += e * re, x += e * fe, l += e * ne, y += e * ae, u += e * ce, g += e * xe, w += e * he, e = f[12], P += e * i, Q += e * J, M += e * X, I += e * _, O += e * F, m += e * W, B += e * G, R += e * ie, v += e * ee, x += e * re, l += e * fe, y += e * ne, u += e * ae, g += e * ce, w += e * xe, N += e * he, e = f[13], Q += e * i, M += e * J, I += e * X, O += e * _, m += e * F, B += e * W, R += e * G, v += e * ie, x += e * ee, l += e * re, y += e * fe, u += e * ne, g += e * ae, w += e * ce, N += e * xe, Y += e * he, e = f[14], M += e * i, I += e * J, O += e * X, m += e * _, B += e * F, R += e * W, v += e * G, x += e * ie, l += e * ee, y += e * re, u += e * fe, g += e * ne, w += e * ae, N += e * ce, Y += e * xe, z += e * he, e = f[15], I += e * i, O += e * J, m += e * X, B += e * _, R += e * F, v += e * W, x += e * G, l += e * ie, y += e * ee, u += e * re, g += e * fe, w += e * ne, N += e * ae, Y += e * ce, z += e * xe, H += e * he, s += 38 * O, c += 38 * m, p += 38 * B, b += 38 * R, C += 38 * v, E += 38 * x, V += 38 * l, U += 38 * y, T += 38 * u, k += 38 * g, K += 38 * w, j += 38 * N, P += 38 * Y, Q += 38 * z, M += 38 * H, n = 1, e = s + n + 65535, n = Math.floor(e / 65536), s = e - n * 65536, e = c + n + 65535, n = Math.floor(e / 65536), c = e - n * 65536, e = p + n + 65535, n = Math.floor(e / 65536), p = e - n * 65536, e = b + n + 65535, n = Math.floor(e / 65536), b = e - n * 65536, e = C + n + 65535, n = Math.floor(e / 65536), C = e - n * 65536, e = E + n + 65535, n = Math.floor(e / 65536), E = e - n * 65536, e = V + n + 65535, n = Math.floor(e / 65536), V = e - n * 65536, e = U + n + 65535, n = Math.floor(e / 65536), U = e - n * 65536, e = T + n + 65535, n = Math.floor(e / 65536), T = e - n * 65536, e = k + n + 65535, n = Math.floor(e / 65536), k = e - n * 65536, e = K + n + 65535, n = Math.floor(e / 65536), K = e - n * 65536, e = j + n + 65535, n = Math.floor(e / 65536), j = e - n * 65536, e = P + n + 65535, n = Math.floor(e / 65536), P = e - n * 65536, e = Q + n + 65535, n = Math.floor(e / 65536), Q = e - n * 65536, e = M + n + 65535, n = Math.floor(e / 65536), M = e - n * 65536, e = I + n + 65535, n = Math.floor(e / 65536), I = e - n * 65536, s += n - 1 + 37 * (n - 1), n = 1, e = s + n + 65535, n = Math.floor(e / 65536), s = e - n * 65536, e = c + n + 65535, n = Math.floor(e / 65536), c = e - n * 65536, e = p + n + 65535, n = Math.floor(e / 65536), p = e - n * 65536, e = b + n + 65535, n = Math.floor(e / 65536), b = e - n * 65536, e = C + n + 65535, n = Math.floor(e / 65536), C = e - n * 65536, e = E + n + 65535, n = Math.floor(e / 65536), E = e - n * 65536, e = V + n + 65535, n = Math.floor(e / 65536), V = e - n * 65536, e = U + n + 65535, n = Math.floor(e / 65536), U = e - n * 65536, e = T + n + 65535, n = Math.floor(e / 65536), T = e - n * 65536, e = k + n + 65535, n = Math.floor(e / 65536), k = e - n * 65536, e = K + n + 65535, n = Math.floor(e / 65536), K = e - n * 65536, e = j + n + 65535, n = Math.floor(e / 65536), j = e - n * 65536, e = P + n + 65535, n = Math.floor(e / 65536), P = e - n * 65536, e = Q + n + 65535, n = Math.floor(e / 65536), Q = e - n * 65536, e = M + n + 65535, n = Math.floor(e / 65536), M = e - n * 65536, e = I + n + 65535, n = Math.floor(e / 65536), I = e - n * 65536, s += n - 1 + 37 * (n - 1), t[0] = s, t[1] = c, t[2] = p, t[3] = b, t[4] = C, t[5] = E, t[6] = V, t[7] = U, t[8] = T, t[9] = k, t[10] = K, t[11] = j, t[12] = P, t[13] = Q, t[14] = M, t[15] = I;
    }
    function Ae(t, f) {
      Z(t, f, f);
    }
    function Tt(t, f) {
      var r = o(), e;
      for (e = 0; e < 16; e++) r[e] = f[e];
      for (e = 253; e >= 0; e--)
        Ae(r, r), e !== 2 && e !== 4 && Z(r, r, f);
      for (e = 0; e < 16; e++) t[e] = r[e];
    }
    function kt(t, f) {
      var r = o(), e;
      for (e = 0; e < 16; e++) r[e] = f[e];
      for (e = 250; e >= 0; e--)
        Ae(r, r), e !== 1 && Z(r, r, f);
      for (e = 0; e < 16; e++) t[e] = r[e];
    }
    function Ze(t, f, r) {
      var e = new Uint8Array(32), n = new Float64Array(80), s, c, p = o(), b = o(), C = o(), E = o(), V = o(), U = o();
      for (c = 0; c < 31; c++) e[c] = f[c];
      for (e[31] = f[31] & 127 | 64, e[0] &= 248, xt(n, r), c = 0; c < 16; c++)
        b[c] = n[c], E[c] = p[c] = C[c] = 0;
      for (p[0] = E[0] = 1, c = 254; c >= 0; --c)
        s = e[c >>> 3] >>> (c & 7) & 1, Te(p, b, s), Te(C, E, s), ye(V, p, C), we(p, p, C), ye(C, b, E), we(b, b, E), Ae(E, V), Ae(U, p), Z(p, C, p), Z(C, b, V), ye(V, p, C), we(p, p, C), Ae(b, p), we(C, E, U), Z(p, C, q), ye(p, p, E), Z(C, C, p), Z(p, E, U), Z(E, b, n), Ae(b, V), Te(p, b, s), Te(C, E, s);
      for (c = 0; c < 16; c++)
        n[c + 16] = p[c], n[c + 32] = C[c], n[c + 48] = b[c], n[c + 64] = E[c];
      var T = n.subarray(32), k = n.subarray(16);
      return Tt(T, T), Z(k, k, T), ke(t, k), 0;
    }
    function qe(t, f) {
      return Ze(t, f, S);
    }
    function Pt(t, f) {
      return h(f, 32), qe(t, f);
    }
    function We(t, f, r) {
      var e = new Uint8Array(32);
      return Ze(e, r, f), Ue(t, d, e, pe);
    }
    var Mt = ot, tr = st;
    function rr(t, f, r, e, n, s) {
      var c = new Uint8Array(32);
      return We(c, n, s), Mt(t, f, r, e, c);
    }
    function fr(t, f, r, e, n, s) {
      var c = new Uint8Array(32);
      return We(c, n, s), tr(t, f, r, e, c);
    }
    var Qt = [
      1116352408,
      3609767458,
      1899447441,
      602891725,
      3049323471,
      3964484399,
      3921009573,
      2173295548,
      961987163,
      4081628472,
      1508970993,
      3053834265,
      2453635748,
      2937671579,
      2870763221,
      3664609560,
      3624381080,
      2734883394,
      310598401,
      1164996542,
      607225278,
      1323610764,
      1426881987,
      3590304994,
      1925078388,
      4068182383,
      2162078206,
      991336113,
      2614888103,
      633803317,
      3248222580,
      3479774868,
      3835390401,
      2666613458,
      4022224774,
      944711139,
      264347078,
      2341262773,
      604807628,
      2007800933,
      770255983,
      1495990901,
      1249150122,
      1856431235,
      1555081692,
      3175218132,
      1996064986,
      2198950837,
      2554220882,
      3999719339,
      2821834349,
      766784016,
      2952996808,
      2566594879,
      3210313671,
      3203337956,
      3336571891,
      1034457026,
      3584528711,
      2466948901,
      113926993,
      3758326383,
      338241895,
      168717936,
      666307205,
      1188179964,
      773529912,
      1546045734,
      1294757372,
      1522805485,
      1396182291,
      2643833823,
      1695183700,
      2343527390,
      1986661051,
      1014477480,
      2177026350,
      1206759142,
      2456956037,
      344077627,
      2730485921,
      1290863460,
      2820302411,
      3158454273,
      3259730800,
      3505952657,
      3345764771,
      106217008,
      3516065817,
      3606008344,
      3600352804,
      1432725776,
      4094571909,
      1467031594,
      275423344,
      851169720,
      430227734,
      3100823752,
      506948616,
      1363258195,
      659060556,
      3750685593,
      883997877,
      3785050280,
      958139571,
      3318307427,
      1322822218,
      3812723403,
      1537002063,
      2003034995,
      1747873779,
      3602036899,
      1955562222,
      1575990012,
      2024104815,
      1125592928,
      2227730452,
      2716904306,
      2361852424,
      442776044,
      2428436474,
      593698344,
      2756734187,
      3733110249,
      3204031479,
      2999351573,
      3329325298,
      3815920427,
      3391569614,
      3928383900,
      3515267271,
      566280711,
      3940187606,
      3454069534,
      4118630271,
      4000239992,
      116418474,
      1914138554,
      174292421,
      2731055270,
      289380356,
      3203993006,
      460393269,
      320620315,
      685471733,
      587496836,
      852142971,
      1086792851,
      1017036298,
      365543100,
      1126000580,
      2618297676,
      1288033470,
      3409855158,
      1501505948,
      4234509866,
      1607167915,
      987167468,
      1816402316,
      1246189591
    ];
    function Dt(t, f, r, e) {
      for (var n = new Int32Array(16), s = new Int32Array(16), c, p, b, C, E, V, U, T, k, K, j, P, Q, M, I, O, m, B, R, v, x, l, y, u, g, w, N = t[0], Y = t[1], z = t[2], H = t[3], i = t[4], J = t[5], X = t[6], _ = t[7], F = f[0], W = f[1], G = f[2], ie = f[3], ee = f[4], re = f[5], fe = f[6], ne = f[7], ae = 0; e >= 128; ) {
        for (R = 0; R < 16; R++)
          v = 8 * R + ae, n[R] = r[v + 0] << 24 | r[v + 1] << 16 | r[v + 2] << 8 | r[v + 3], s[R] = r[v + 4] << 24 | r[v + 5] << 16 | r[v + 6] << 8 | r[v + 7];
        for (R = 0; R < 80; R++)
          if (c = N, p = Y, b = z, C = H, E = i, V = J, U = X, T = _, k = F, K = W, j = G, P = ie, Q = ee, M = re, I = fe, O = ne, x = _, l = ne, y = l & 65535, u = l >>> 16, g = x & 65535, w = x >>> 16, x = (i >>> 14 | ee << 18) ^ (i >>> 18 | ee << 14) ^ (ee >>> 9 | i << 23), l = (ee >>> 14 | i << 18) ^ (ee >>> 18 | i << 14) ^ (i >>> 9 | ee << 23), y += l & 65535, u += l >>> 16, g += x & 65535, w += x >>> 16, x = i & J ^ ~i & X, l = ee & re ^ ~ee & fe, y += l & 65535, u += l >>> 16, g += x & 65535, w += x >>> 16, x = Qt[R * 2], l = Qt[R * 2 + 1], y += l & 65535, u += l >>> 16, g += x & 65535, w += x >>> 16, x = n[R % 16], l = s[R % 16], y += l & 65535, u += l >>> 16, g += x & 65535, w += x >>> 16, u += y >>> 16, g += u >>> 16, w += g >>> 16, m = g & 65535 | w << 16, B = y & 65535 | u << 16, x = m, l = B, y = l & 65535, u = l >>> 16, g = x & 65535, w = x >>> 16, x = (N >>> 28 | F << 4) ^ (F >>> 2 | N << 30) ^ (F >>> 7 | N << 25), l = (F >>> 28 | N << 4) ^ (N >>> 2 | F << 30) ^ (N >>> 7 | F << 25), y += l & 65535, u += l >>> 16, g += x & 65535, w += x >>> 16, x = N & Y ^ N & z ^ Y & z, l = F & W ^ F & G ^ W & G, y += l & 65535, u += l >>> 16, g += x & 65535, w += x >>> 16, u += y >>> 16, g += u >>> 16, w += g >>> 16, T = g & 65535 | w << 16, O = y & 65535 | u << 16, x = C, l = P, y = l & 65535, u = l >>> 16, g = x & 65535, w = x >>> 16, x = m, l = B, y += l & 65535, u += l >>> 16, g += x & 65535, w += x >>> 16, u += y >>> 16, g += u >>> 16, w += g >>> 16, C = g & 65535 | w << 16, P = y & 65535 | u << 16, Y = c, z = p, H = b, i = C, J = E, X = V, _ = U, N = T, W = k, G = K, ie = j, ee = P, re = Q, fe = M, ne = I, F = O, R % 16 === 15)
            for (v = 0; v < 16; v++)
              x = n[v], l = s[v], y = l & 65535, u = l >>> 16, g = x & 65535, w = x >>> 16, x = n[(v + 9) % 16], l = s[(v + 9) % 16], y += l & 65535, u += l >>> 16, g += x & 65535, w += x >>> 16, m = n[(v + 1) % 16], B = s[(v + 1) % 16], x = (m >>> 1 | B << 31) ^ (m >>> 8 | B << 24) ^ m >>> 7, l = (B >>> 1 | m << 31) ^ (B >>> 8 | m << 24) ^ (B >>> 7 | m << 25), y += l & 65535, u += l >>> 16, g += x & 65535, w += x >>> 16, m = n[(v + 14) % 16], B = s[(v + 14) % 16], x = (m >>> 19 | B << 13) ^ (B >>> 29 | m << 3) ^ m >>> 6, l = (B >>> 19 | m << 13) ^ (m >>> 29 | B << 3) ^ (B >>> 6 | m << 26), y += l & 65535, u += l >>> 16, g += x & 65535, w += x >>> 16, u += y >>> 16, g += u >>> 16, w += g >>> 16, n[v] = g & 65535 | w << 16, s[v] = y & 65535 | u << 16;
        x = N, l = F, y = l & 65535, u = l >>> 16, g = x & 65535, w = x >>> 16, x = t[0], l = f[0], y += l & 65535, u += l >>> 16, g += x & 65535, w += x >>> 16, u += y >>> 16, g += u >>> 16, w += g >>> 16, t[0] = N = g & 65535 | w << 16, f[0] = F = y & 65535 | u << 16, x = Y, l = W, y = l & 65535, u = l >>> 16, g = x & 65535, w = x >>> 16, x = t[1], l = f[1], y += l & 65535, u += l >>> 16, g += x & 65535, w += x >>> 16, u += y >>> 16, g += u >>> 16, w += g >>> 16, t[1] = Y = g & 65535 | w << 16, f[1] = W = y & 65535 | u << 16, x = z, l = G, y = l & 65535, u = l >>> 16, g = x & 65535, w = x >>> 16, x = t[2], l = f[2], y += l & 65535, u += l >>> 16, g += x & 65535, w += x >>> 16, u += y >>> 16, g += u >>> 16, w += g >>> 16, t[2] = z = g & 65535 | w << 16, f[2] = G = y & 65535 | u << 16, x = H, l = ie, y = l & 65535, u = l >>> 16, g = x & 65535, w = x >>> 16, x = t[3], l = f[3], y += l & 65535, u += l >>> 16, g += x & 65535, w += x >>> 16, u += y >>> 16, g += u >>> 16, w += g >>> 16, t[3] = H = g & 65535 | w << 16, f[3] = ie = y & 65535 | u << 16, x = i, l = ee, y = l & 65535, u = l >>> 16, g = x & 65535, w = x >>> 16, x = t[4], l = f[4], y += l & 65535, u += l >>> 16, g += x & 65535, w += x >>> 16, u += y >>> 16, g += u >>> 16, w += g >>> 16, t[4] = i = g & 65535 | w << 16, f[4] = ee = y & 65535 | u << 16, x = J, l = re, y = l & 65535, u = l >>> 16, g = x & 65535, w = x >>> 16, x = t[5], l = f[5], y += l & 65535, u += l >>> 16, g += x & 65535, w += x >>> 16, u += y >>> 16, g += u >>> 16, w += g >>> 16, t[5] = J = g & 65535 | w << 16, f[5] = re = y & 65535 | u << 16, x = X, l = fe, y = l & 65535, u = l >>> 16, g = x & 65535, w = x >>> 16, x = t[6], l = f[6], y += l & 65535, u += l >>> 16, g += x & 65535, w += x >>> 16, u += y >>> 16, g += u >>> 16, w += g >>> 16, t[6] = X = g & 65535 | w << 16, f[6] = fe = y & 65535 | u << 16, x = _, l = ne, y = l & 65535, u = l >>> 16, g = x & 65535, w = x >>> 16, x = t[7], l = f[7], y += l & 65535, u += l >>> 16, g += x & 65535, w += x >>> 16, u += y >>> 16, g += u >>> 16, w += g >>> 16, t[7] = _ = g & 65535 | w << 16, f[7] = ne = y & 65535 | u << 16, ae += 128, e -= 128;
      }
      return e;
    }
    function Ce(t, f, r) {
      var e = new Int32Array(8), n = new Int32Array(8), s = new Uint8Array(256), c, p = r;
      for (e[0] = 1779033703, e[1] = 3144134277, e[2] = 1013904242, e[3] = 2773480762, e[4] = 1359893119, e[5] = 2600822924, e[6] = 528734635, e[7] = 1541459225, n[0] = 4089235720, n[1] = 2227873595, n[2] = 4271175723, n[3] = 1595750129, n[4] = 2917565137, n[5] = 725511199, n[6] = 4215389547, n[7] = 327033209, Dt(e, n, f, r), r %= 128, c = 0; c < r; c++) s[c] = f[p - r + c];
      for (s[r] = 128, r = 256 - 128 * (r < 112 ? 1 : 0), s[r - 9] = 0, de(s, r - 8, p / 536870912 | 0, p << 3), Dt(e, n, s, r), c = 0; c < 8; c++) de(t, 8 * c, e[c], n[c]);
      return 0;
    }
    function Ge(t, f) {
      var r = o(), e = o(), n = o(), s = o(), c = o(), p = o(), b = o(), C = o(), E = o();
      we(r, t[1], t[0]), we(E, f[1], f[0]), Z(r, r, E), ye(e, t[0], t[1]), ye(E, f[0], f[1]), Z(e, e, E), Z(n, t[3], f[3]), Z(n, n, oe), Z(s, t[2], f[2]), ye(s, s, s), we(c, e, r), we(p, s, n), ye(b, s, n), ye(C, e, r), Z(t[0], c, p), Z(t[1], C, b), Z(t[2], b, p), Z(t[3], c, C);
    }
    function jt(t, f, r) {
      var e;
      for (e = 0; e < 4; e++)
        Te(t[e], f[e], r);
    }
    function ht(t, f) {
      var r = o(), e = o(), n = o();
      Tt(n, f[2]), Z(r, f[0], n), Z(e, f[1], n), ke(t, e), t[31] ^= Lt(r) << 7;
    }
    function lt(t, f, r) {
      var e, n;
      for (Ee(t[0], L), Ee(t[1], D), Ee(t[2], D), Ee(t[3], L), n = 255; n >= 0; --n)
        e = r[n / 8 | 0] >> (n & 7) & 1, jt(t, f, e), Ge(f, t), Ge(t, t), jt(t, f, e);
    }
    function Ve(t, f) {
      var r = [o(), o(), o(), o()];
      Ee(r[0], be), Ee(r[1], Ie), Ee(r[2], D), Z(r[3], be, Ie), lt(t, r, f);
    }
    function dt(t, f, r) {
      var e = new Uint8Array(64), n = [o(), o(), o(), o()], s;
      for (r || h(f, 32), Ce(e, f, 32), e[0] &= 248, e[31] &= 127, e[31] |= 64, Ve(n, e), ht(t, n), s = 0; s < 32; s++) f[s + 32] = t[s];
      return 0;
    }
    var Xe = new Float64Array([237, 211, 245, 92, 26, 99, 18, 88, 214, 156, 247, 162, 222, 249, 222, 20, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 16]);
    function At(t, f) {
      var r, e, n, s;
      for (e = 63; e >= 32; --e) {
        for (r = 0, n = e - 32, s = e - 12; n < s; ++n)
          f[n] += r - 16 * f[e] * Xe[n - (e - 32)], r = Math.floor((f[n] + 128) / 256), f[n] -= r * 256;
        f[n] += r, f[e] = 0;
      }
      for (r = 0, n = 0; n < 32; n++)
        f[n] += r - (f[31] >> 4) * Xe[n], r = f[n] >> 8, f[n] &= 255;
      for (n = 0; n < 32; n++) f[n] -= r * Xe[n];
      for (e = 0; e < 32; e++)
        f[e + 1] += f[e] >> 8, t[e] = f[e] & 255;
    }
    function ut(t) {
      var f = new Float64Array(64), r;
      for (r = 0; r < 64; r++) f[r] = t[r];
      for (r = 0; r < 64; r++) t[r] = 0;
      At(t, f);
    }
    function Kt(t, f, r, e) {
      var n = new Uint8Array(64), s = new Uint8Array(64), c = new Uint8Array(64), p, b, C = new Float64Array(64), E = [o(), o(), o(), o()];
      Ce(n, e, 32), n[0] &= 248, n[31] &= 127, n[31] |= 64;
      var V = r + 64;
      for (p = 0; p < r; p++) t[64 + p] = f[p];
      for (p = 0; p < 32; p++) t[32 + p] = n[32 + p];
      for (Ce(c, t.subarray(32), r + 32), ut(c), Ve(E, c), ht(t, E), p = 32; p < 64; p++) t[p] = e[p];
      for (Ce(s, t, r + 64), ut(s), p = 0; p < 64; p++) C[p] = 0;
      for (p = 0; p < 32; p++) C[p] = c[p];
      for (p = 0; p < 32; p++)
        for (b = 0; b < 32; b++)
          C[p + b] += s[p] * n[b];
      return At(t.subarray(32), C), V;
    }
    function nr(t, f) {
      var r = o(), e = o(), n = o(), s = o(), c = o(), p = o(), b = o();
      return Ee(t[2], D), xt(t[1], f), Ae(n, t[1]), Z(s, n, $), we(n, n, t[2]), ye(s, t[2], s), Ae(c, s), Ae(p, c), Z(b, p, c), Z(r, b, n), Z(r, r, s), kt(r, r), Z(r, r, n), Z(r, r, s), Z(r, r, s), Z(t[0], r, s), Ae(e, t[0]), Z(e, e, s), Nt(e, n) && Z(t[0], t[0], ue), Ae(e, t[0]), Z(e, e, s), Nt(e, n) ? -1 : (Lt(t[0]) === f[31] >> 7 && we(t[0], L, t[0]), Z(t[3], t[0], t[1]), 0);
    }
    function pt(t, f, r, e) {
      var n, s = new Uint8Array(32), c = new Uint8Array(64), p = [o(), o(), o(), o()], b = [o(), o(), o(), o()];
      if (r < 64 || nr(b, e)) return -1;
      for (n = 0; n < r; n++) t[n] = f[n];
      for (n = 0; n < 32; n++) t[n + 32] = e[n];
      if (Ce(c, t, r), ut(c), lt(p, b, c), Ve(b, f.subarray(32)), Ge(p, b), ht(s, p), r -= 64, Be(f, 0, s, 0)) {
        for (n = 0; n < r; n++) t[n] = 0;
        return -1;
      }
      for (n = 0; n < r; n++) t[n] = f[n + 64];
      return r;
    }
    var gt = 32, _e = 24, Ke = 32, Pe = 16, Ye = 32, $e = 32, He = 32, ze = 32, yt = 32, Yt = _e, ir = Ke, ar = Pe, me = 64, Se = 32, Me = 64, wt = 32, bt = 64;
    a.lowlevel = {
      crypto_core_hsalsa20: Ue,
      crypto_stream_xor: it,
      crypto_stream: St,
      crypto_stream_salsa20_xor: Re,
      crypto_stream_salsa20: ge,
      crypto_onetimeauth: at,
      crypto_onetimeauth_verify: Ot,
      crypto_verify_16: De,
      crypto_verify_32: Be,
      crypto_secretbox: ot,
      crypto_secretbox_open: st,
      crypto_scalarmult: Ze,
      crypto_scalarmult_base: qe,
      crypto_box_beforenm: We,
      crypto_box_afternm: Mt,
      crypto_box: rr,
      crypto_box_open: fr,
      crypto_box_keypair: Pt,
      crypto_hash: Ce,
      crypto_sign: Kt,
      crypto_sign_keypair: dt,
      crypto_sign_open: pt,
      crypto_secretbox_KEYBYTES: gt,
      crypto_secretbox_NONCEBYTES: _e,
      crypto_secretbox_ZEROBYTES: Ke,
      crypto_secretbox_BOXZEROBYTES: Pe,
      crypto_scalarmult_BYTES: Ye,
      crypto_scalarmult_SCALARBYTES: $e,
      crypto_box_PUBLICKEYBYTES: He,
      crypto_box_SECRETKEYBYTES: ze,
      crypto_box_BEFORENMBYTES: yt,
      crypto_box_NONCEBYTES: Yt,
      crypto_box_ZEROBYTES: ir,
      crypto_box_BOXZEROBYTES: ar,
      crypto_sign_BYTES: me,
      crypto_sign_PUBLICKEYBYTES: Se,
      crypto_sign_SECRETKEYBYTES: Me,
      crypto_sign_SEEDBYTES: wt,
      crypto_hash_BYTES: bt,
      gf: o,
      D: $,
      L: Xe,
      pack25519: ke,
      unpack25519: xt,
      M: Z,
      A: ye,
      S: Ae,
      Z: we,
      pow2523: kt,
      add: Ge,
      set25519: Ee,
      modL: At,
      scalarmult: lt,
      scalarbase: Ve
    };
    function Ht(t, f) {
      if (t.length !== gt) throw new Error("bad key size");
      if (f.length !== _e) throw new Error("bad nonce size");
    }
    function or(t, f) {
      if (t.length !== He) throw new Error("bad public key size");
      if (f.length !== ze) throw new Error("bad secret key size");
    }
    function le() {
      for (var t = 0; t < arguments.length; t++)
        if (!(arguments[t] instanceof Uint8Array))
          throw new TypeError("unexpected type, use Uint8Array");
    }
    function zt(t) {
      for (var f = 0; f < t.length; f++) t[f] = 0;
    }
    a.randomBytes = function(t) {
      var f = new Uint8Array(t);
      return h(f, t), f;
    }, a.secretbox = function(t, f, r) {
      le(t, f, r), Ht(r, f);
      for (var e = new Uint8Array(Ke + t.length), n = new Uint8Array(e.length), s = 0; s < t.length; s++) e[s + Ke] = t[s];
      return ot(n, e, e.length, f, r), n.subarray(Pe);
    }, a.secretbox.open = function(t, f, r) {
      le(t, f, r), Ht(r, f);
      for (var e = new Uint8Array(Pe + t.length), n = new Uint8Array(e.length), s = 0; s < t.length; s++) e[s + Pe] = t[s];
      return e.length < 32 || st(n, e, e.length, f, r) !== 0 ? null : n.subarray(Ke);
    }, a.secretbox.keyLength = gt, a.secretbox.nonceLength = _e, a.secretbox.overheadLength = Pe, a.scalarMult = function(t, f) {
      if (le(t, f), t.length !== $e) throw new Error("bad n size");
      if (f.length !== Ye) throw new Error("bad p size");
      var r = new Uint8Array(Ye);
      return Ze(r, t, f), r;
    }, a.scalarMult.base = function(t) {
      if (le(t), t.length !== $e) throw new Error("bad n size");
      var f = new Uint8Array(Ye);
      return qe(f, t), f;
    }, a.scalarMult.scalarLength = $e, a.scalarMult.groupElementLength = Ye, a.box = function(t, f, r, e) {
      var n = a.box.before(r, e);
      return a.secretbox(t, f, n);
    }, a.box.before = function(t, f) {
      le(t, f), or(t, f);
      var r = new Uint8Array(yt);
      return We(r, t, f), r;
    }, a.box.after = a.secretbox, a.box.open = function(t, f, r, e) {
      var n = a.box.before(r, e);
      return a.secretbox.open(t, f, n);
    }, a.box.open.after = a.secretbox.open, a.box.keyPair = function() {
      var t = new Uint8Array(He), f = new Uint8Array(ze);
      return Pt(t, f), { publicKey: t, secretKey: f };
    }, a.box.keyPair.fromSecretKey = function(t) {
      if (le(t), t.length !== ze)
        throw new Error("bad secret key size");
      var f = new Uint8Array(He);
      return qe(f, t), { publicKey: f, secretKey: new Uint8Array(t) };
    }, a.box.publicKeyLength = He, a.box.secretKeyLength = ze, a.box.sharedKeyLength = yt, a.box.nonceLength = Yt, a.box.overheadLength = a.secretbox.overheadLength, a.sign = function(t, f) {
      if (le(t, f), f.length !== Me)
        throw new Error("bad secret key size");
      var r = new Uint8Array(me + t.length);
      return Kt(r, t, t.length, f), r;
    }, a.sign.open = function(t, f) {
      if (le(t, f), f.length !== Se)
        throw new Error("bad public key size");
      var r = new Uint8Array(t.length), e = pt(r, t, t.length, f);
      if (e < 0) return null;
      for (var n = new Uint8Array(e), s = 0; s < n.length; s++) n[s] = r[s];
      return n;
    }, a.sign.detached = function(t, f) {
      for (var r = a.sign(t, f), e = new Uint8Array(me), n = 0; n < e.length; n++) e[n] = r[n];
      return e;
    }, a.sign.detached.verify = function(t, f, r) {
      if (le(t, f, r), f.length !== me)
        throw new Error("bad signature size");
      if (r.length !== Se)
        throw new Error("bad public key size");
      var e = new Uint8Array(me + t.length), n = new Uint8Array(me + t.length), s;
      for (s = 0; s < me; s++) e[s] = f[s];
      for (s = 0; s < t.length; s++) e[s + me] = t[s];
      return pt(n, e, e.length, r) >= 0;
    }, a.sign.keyPair = function() {
      var t = new Uint8Array(Se), f = new Uint8Array(Me);
      return dt(t, f), { publicKey: t, secretKey: f };
    }, a.sign.keyPair.fromSecretKey = function(t) {
      if (le(t), t.length !== Me)
        throw new Error("bad secret key size");
      for (var f = new Uint8Array(Se), r = 0; r < f.length; r++) f[r] = t[32 + r];
      return { publicKey: f, secretKey: new Uint8Array(t) };
    }, a.sign.keyPair.fromSeed = function(t) {
      if (le(t), t.length !== wt)
        throw new Error("bad seed size");
      for (var f = new Uint8Array(Se), r = new Uint8Array(Me), e = 0; e < 32; e++) r[e] = t[e];
      return dt(f, r, !0), { publicKey: f, secretKey: r };
    }, a.sign.publicKeyLength = Se, a.sign.secretKeyLength = Me, a.sign.seedLength = wt, a.sign.signatureLength = me, a.hash = function(t) {
      le(t);
      var f = new Uint8Array(bt);
      return Ce(f, t, t.length), f;
    }, a.hash.hashLength = bt, a.verify = function(t, f) {
      return le(t, f), t.length === 0 || f.length === 0 || t.length !== f.length ? !1 : Ne(t, 0, f, 0, t.length) === 0;
    }, a.setPRNG = function(t) {
      h = t;
    }, function() {
      var t = typeof self < "u" ? self.crypto || self.msCrypto : null;
      if (t && t.getRandomValues) {
        var f = 65536;
        a.setPRNG(function(r, e) {
          var n, s = new Uint8Array(e);
          for (n = 0; n < e; n += f)
            t.getRandomValues(s.subarray(n, n + Math.min(e - n, f)));
          for (n = 0; n < e; n++) r[n] = s[n];
          zt(s);
        });
      } else typeof Or < "u" && (t = Tr, t && t.randomBytes && a.setPRNG(function(r, e) {
        var n, s = t.randomBytes(e);
        for (n = 0; n < e; n++) r[n] = s[n];
        zt(s);
      }));
    }();
  })(A.exports ? A.exports : self.nacl = self.nacl || {});
})(er);
var kr = er.exports;
const et = /* @__PURE__ */ Rr(kr);
var Pr = Object.defineProperty, Mr = (A, a, o) => a in A ? Pr(A, a, { enumerable: !0, configurable: !0, writable: !0, value: o }) : A[a] = o, Et = (A, a, o) => Mr(A, typeof a != "symbol" ? a + "" : a, o);
async function Qr(A, a) {
  const o = A.getReader();
  let h;
  for (; !(h = await o.read()).done; )
    a(h.value);
}
function Dr(A) {
  let a, o, h, d = !1;
  return function(S) {
    a === void 0 ? (a = S, o = 0, h = -1) : a = Kr(a, S);
    const L = a.length;
    let D = 0;
    for (; o < L; ) {
      d && (a[o] === 10 && (D = ++o), d = !1);
      let q = -1;
      for (; o < L && q === -1; ++o)
        switch (a[o]) {
          case 58:
            h === -1 && (h = o - D);
            break;
          case 13:
            d = !0;
          case 10:
            q = o;
            break;
        }
      if (q === -1)
        break;
      A(a.subarray(D, q), h), D = o, h = -1;
    }
    D === L ? a = void 0 : D !== 0 && (a = a.subarray(D), o -= D);
  };
}
function jr(A, a, o) {
  let h = Jt();
  const d = new TextDecoder();
  return function(S, L) {
    if (S.length === 0)
      o == null || o(h), h = Jt();
    else if (L > 0) {
      const D = d.decode(S.subarray(0, L)), q = L + (S[L + 1] === 32 ? 2 : 1), $ = d.decode(S.subarray(q));
      switch (D) {
        case "data":
          h.data = h.data ? h.data + `
` + $ : $;
          break;
        case "event":
          h.event = $;
          break;
        case "id":
          A(h.id = $);
          break;
        case "retry":
          const oe = parseInt($, 10);
          isNaN(oe) || a(h.retry = oe);
          break;
      }
    }
  };
}
function Kr(A, a) {
  const o = new Uint8Array(A.length + a.length);
  return o.set(A), o.set(a, A.length), o;
}
function Jt() {
  return {
    data: "",
    event: "",
    id: "",
    retry: void 0
  };
}
var Yr = function(A, a) {
  var o = {};
  for (var h in A) Object.prototype.hasOwnProperty.call(A, h) && a.indexOf(h) < 0 && (o[h] = A[h]);
  if (A != null && typeof Object.getOwnPropertySymbols == "function")
    for (var d = 0, h = Object.getOwnPropertySymbols(A); d < h.length; d++)
      a.indexOf(h[d]) < 0 && Object.prototype.propertyIsEnumerable.call(A, h[d]) && (o[h[d]] = A[h[d]]);
  return o;
};
const Bt = "text/event-stream", Hr = 1e3, Zt = "last-event-id";
function zr(A, a) {
  var { signal: o, headers: h, onopen: d, onmessage: S, onclose: L, onerror: D, openWhenHidden: q, fetch: $ } = a, oe = Yr(a, ["signal", "headers", "onopen", "onmessage", "onclose", "onerror", "openWhenHidden", "fetch"]);
  return new Promise((be, Ie) => {
    const ue = Object.assign({}, h);
    ue.accept || (ue.accept = Bt);
    let de;
    function Ne() {
      de.abort(), document.hidden || Ue();
    }
    q || document.addEventListener("visibilitychange", Ne);
    let De = Hr, Be = 0;
    function je() {
      document.removeEventListener("visibilitychange", Ne), window.clearTimeout(Be), de.abort();
    }
    o == null || o.addEventListener("abort", () => {
      je(), be();
    });
    const nt = $ ?? window.fetch, Le = d ?? Fr;
    async function Ue() {
      var pe;
      de = new AbortController();
      try {
        const Re = await nt(A, Object.assign(Object.assign({}, oe), { headers: ue, signal: de.signal }));
        await Le(Re), await Qr(Re.body, Dr(jr((ge) => {
          ge ? ue[Zt] = ge : delete ue[Zt];
        }, (ge) => {
          De = ge;
        }, S))), L == null || L(), je(), be();
      } catch (Re) {
        if (!de.signal.aborted)
          try {
            const ge = (pe = D == null ? void 0 : D(Re)) !== null && pe !== void 0 ? pe : De;
            window.clearTimeout(Be), Be = window.setTimeout(Ue, ge);
          } catch (ge) {
            je(), Ie(ge);
          }
      }
    }
    Ue();
  });
}
function Fr(A) {
  const a = A.headers.get("content-type");
  if (!(a != null && a.startsWith(Bt)))
    throw new Error(`Expected content-type to be ${Bt}, Actual: ${a}`);
}
function Jr(A, a) {
  const o = new Uint8Array(A.length + a.length);
  return o.set(A), o.set(a, A.length), o;
}
function Zr(A, a) {
  if (a >= A.length)
    throw new Error("Index is out of buffer");
  const o = A.slice(0, a), h = A.slice(a);
  return [o, h];
}
function mt(A) {
  let a = "";
  return A.forEach((o) => {
    a += ("0" + (o & 255).toString(16)).slice(-2);
  }), a;
}
function rt(A) {
  if (A.length % 2 !== 0)
    throw new Error(`Cannot convert ${A} to bytesArray`);
  const a = new Uint8Array(A.length / 2);
  for (let o = 0; o < A.length; o += 2)
    a[o / 2] = parseInt(A.slice(o, o + 2), 16);
  return a;
}
class Rt {
  constructor(a) {
    Et(this, "nonceLength", 24), Et(this, "keyPair"), Et(this, "sessionId"), this.keyPair = a ? this.createKeypairFromString(a) : this.createKeypair(), this.sessionId = mt(this.keyPair.publicKey);
  }
  createKeypair() {
    return et.box.keyPair();
  }
  createKeypairFromString(a) {
    return {
      publicKey: rt(a.publicKey),
      secretKey: rt(a.secretKey)
    };
  }
  createNonce() {
    return et.randomBytes(this.nonceLength);
  }
  encrypt(a, o) {
    const h = new TextEncoder().encode(a), d = this.createNonce(), S = et.box(h, d, o, this.keyPair.secretKey);
    return Jr(d, S);
  }
  decrypt(a, o) {
    const [h, d] = Zr(a, this.nonceLength), S = et.box.open(
      d,
      h,
      o,
      this.keyPair.secretKey
    );
    if (!S)
      throw new Error(
        `Decryption error: 
 message: ${a.toString()} 
 sender pubkey: ${o.toString()} 
 keypair pubkey: ${this.keyPair.publicKey.toString()} 
 keypair secretkey: ${this.keyPair.secretKey.toString()}`
      );
    return new TextDecoder().decode(S);
  }
  stringifyKeypair() {
    return {
      publicKey: mt(this.keyPair.publicKey),
      secretKey: mt(this.keyPair.secretKey)
    };
  }
}
new AbortController();
const qr = "https://bridge.mz.xyz", qt = {
  CONNECT: "[MizuWallet SSE Connect]"
}, Wt = async (A) => {
  const a = new URLSearchParams();
  return a.append("client_id", A.keypair.publicKey.toString()), new Promise(async (o, h) => {
    await zr(`${qr}/bridge/events?${a.toString()}`, {
      openWhenHidden: !1,
      onopen(d) {
        return d.status === 200 ? (console.info(`${qt.CONNECT} Opened`), Promise.resolve()) : (console.error(`${qt.CONNECT} Failed to open`), Promise.reject());
      },
      onmessage(d) {
        try {
          if (d.data && d.data.startsWith("{")) {
            const S = JSON.parse(d.data);
            if (S.message) {
              const L = new Rt({
                ...A.keypair
              }), D = S.message, q = rt(D), $ = L.decrypt(
                q,
                rt(S.from.toString())
              ), oe = JSON.parse($);
              o(oe);
            }
          }
        } catch (S) {
          console.error(S), h(S);
        }
      }
    });
  });
}, Ut = typeof window < "u" && !!(window != null && window.TelegramWebviewProxy);
var Vt, Xt;
const Gt = typeof window < "u" && !!((Xt = (Vt = window == null ? void 0 : window.Telegram) == null ? void 0 : Vt.WebApp) != null && Xt.openTelegramLink);
class ft {
  static buildAction(a) {
    return `${a.prefix}${a.action}_${a.params.map((o) => ft.actionParamsEncode(o)).join("_")}`;
  }
  static actionParamsEncode(a) {
    return encodeURIComponent(a).replace(/\./g, "%2E").replace(/%/g, "--");
  }
  static actionParamsDecode(a) {
    return decodeURIComponent(a.replace(/--/g, "%"));
  }
}
const Qe = "mizuwallet-address";
class Wr {
  /**
   *
   * @param args.manifestURL Manifest URL
   */
  constructor(a) {
    /**
     * @param manifestURL
     */
    te(this, "manifestURL");
    te(this, "miniAppURL");
    if (!a.manifestURL) throw new Error("manifestURL is required");
    this.manifestURL = a.manifestURL, this.miniAppURL = wr(a.network);
  }
  /**
   * Connect
   *
   * Open MizuWallet MiniApp to connect
   * Try to get Address info back
   *
   *
   * @returns
   */
  async connect() {
    var d;
    if (window != null && window.localStorage && ((d = window.localStorage) != null && d.getItem(Qe)))
      return {
        address: window.localStorage.getItem(Qe).toString(),
        publicKey: ""
      };
    const a = new Rt(), o = ft.buildAction({
      prefix: "R_",
      action: "miniapp-connect",
      params: [a.sessionId, this.manifestURL]
    });
    Gt ? window == null || window.Telegram.WebApp.openTelegramLink(`${this.miniAppURL}?startapp=${o}`, "_blank") : window == null || window.open(`${this.miniAppURL}?startapp=${o}`, "_blank");
    const h = await Wt({
      keypair: a.stringifyKeypair()
    });
    if (window != null && window.localStorage && xr.isValid({
      input: h == null ? void 0 : h.address,
      strict: !0
    }))
      return window.localStorage.setItem(Qe, h == null ? void 0 : h.address), {
        address: h == null ? void 0 : h.address,
        publicKey: ""
      };
    throw new Error(`${It.CONNECT} Error`);
  }
  disconnect() {
    window != null && window.localStorage.getItem(Qe) && (window == null || window.localStorage.removeItem(Qe));
  }
  async signAndSubmitTransaction(a) {
    var o, h, d, S, L;
    if (window != null && window.localStorage.getItem(Qe)) {
      const D = new Rt(), q = ft.buildAction({
        prefix: "R_",
        action: "miniapp-transaction",
        params: [D.sessionId, this.manifestURL, window == null ? void 0 : window.btoa(JSON.stringify(a))]
      });
      Gt ? (h = (o = window == null ? void 0 : window.Telegram) == null ? void 0 : o.WebApp) == null || h.openTelegramLink(
        `${this.miniAppURL}?startapp=${q}`,
        "_blank"
      ) : window == null || window.open(`${this.miniAppURL}?startapp=${q}`, "_blank");
      const $ = await Wt({
        keypair: D.stringifyKeypair()
      });
      if ($.cancel)
        throw new Error("User Canceled");
      return {
        hash: ((L = (S = (d = $.transactions) == null ? void 0 : d.filter((oe) => oe.type === 2)) == null ? void 0 : S[0]) == null ? void 0 : L.hash) || ""
      };
    } else
      throw new Error(`${It.TRANSACTION} No address found`);
  }
}
/**
  postmate - A powerful, simple, promise-based postMessage library
  @version v1.5.2
  @link https://github.com/dollarshaveclub/postmate
  @author Jacob Kelley <jakie8@gmail.com>
  @license MIT
**/
var Oe = "application/x-postmate-v1+json", Gr = 5, Vr = 0, Xr = function() {
  return ++Vr;
}, se = function() {
  var a;
  return ve.debug ? (a = console).log.apply(a, arguments) : null;
}, _r = function(a) {
  var o = document.createElement("a");
  o.href = a;
  var h = o.protocol.length > 4 ? o.protocol : window.location.protocol, d = o.host.length ? o.port === "80" || o.port === "443" ? o.hostname : o.host : window.location.host;
  return o.origin || h + "//" + d;
}, $r = {
  handshake: 1,
  "handshake-reply": 1,
  call: 1,
  emit: 1,
  reply: 1,
  request: 1
  /**
   * Ensures that a message is safe to interpret
   * @param  {Object} message The postmate message being sent
   * @param  {String|Boolean} allowedOrigin The whitelisted origin or false to skip origin check
   * @return {Boolean}
   */
}, Ct = function(a, o) {
  return !(typeof o == "string" && a.origin !== o || !a.data || typeof a.data == "object" && !("postmate" in a.data) || a.data.type !== Oe || !$r[a.data.postmate]);
}, ef = function(a, o) {
  var h = typeof a[o] == "function" ? a[o]() : a[o];
  return ve.Promise.resolve(h);
}, tf = /* @__PURE__ */ function() {
  function A(o) {
    var h = this;
    this.parent = o.parent, this.frame = o.frame, this.child = o.child, this.childOrigin = o.childOrigin, this.events = {}, process.env.NODE_ENV !== "production" && (se("Parent: Registering API"), se("Parent: Awaiting messages...")), this.listener = function(d) {
      if (!Ct(d, h.childOrigin)) return !1;
      var S = ((d || {}).data || {}).value || {}, L = S.data, D = S.name;
      d.data.postmate === "emit" && (process.env.NODE_ENV !== "production" && se("Parent: Received event emission: " + D), D in h.events && h.events[D].call(h, L));
    }, this.parent.addEventListener("message", this.listener, !1), process.env.NODE_ENV !== "production" && se("Parent: Awaiting event emissions from Child");
  }
  var a = A.prototype;
  return a.get = function(h) {
    var d = this;
    return new ve.Promise(function(S) {
      var L = Xr(), D = function q($) {
        $.data.uid === L && $.data.postmate === "reply" && (d.parent.removeEventListener("message", q, !1), S($.data.value));
      };
      d.parent.addEventListener("message", D, !1), d.child.postMessage({
        postmate: "request",
        type: Oe,
        property: h,
        uid: L
      }, d.childOrigin);
    });
  }, a.call = function(h, d) {
    this.child.postMessage({
      postmate: "call",
      type: Oe,
      property: h,
      data: d
    }, this.childOrigin);
  }, a.on = function(h, d) {
    this.events[h] = d;
  }, a.destroy = function() {
    process.env.NODE_ENV !== "production" && se("Parent: Destroying Postmate instance"), window.removeEventListener("message", this.listener, !1), this.frame.parentNode.removeChild(this.frame);
  }, A;
}(), rf = /* @__PURE__ */ function() {
  function A(o) {
    var h = this;
    this.model = o.model, this.parent = o.parent, this.parentOrigin = o.parentOrigin, this.child = o.child, process.env.NODE_ENV !== "production" && (se("Child: Registering API"), se("Child: Awaiting messages...")), this.child.addEventListener("message", function(d) {
      if (Ct(d, h.parentOrigin)) {
        process.env.NODE_ENV !== "production" && se("Child: Received request", d.data);
        var S = d.data, L = S.property, D = S.uid, q = S.data;
        if (d.data.postmate === "call") {
          L in h.model && typeof h.model[L] == "function" && h.model[L](q);
          return;
        }
        ef(h.model, L).then(function($) {
          return d.source.postMessage({
            property: L,
            postmate: "reply",
            type: Oe,
            uid: D,
            value: $
          }, d.origin);
        });
      }
    });
  }
  var a = A.prototype;
  return a.emit = function(h, d) {
    process.env.NODE_ENV !== "production" && se('Child: Emitting Event "' + h + '"', d), this.parent.postMessage({
      postmate: "emit",
      type: Oe,
      value: {
        name: h,
        data: d
      }
    }, this.parentOrigin);
  }, A;
}(), ve = /* @__PURE__ */ function() {
  function A(o) {
    var h = o.container, d = h === void 0 ? typeof d < "u" ? d : document.body : h, S = o.model, L = o.url, D = o.name, q = o.classListArray, $ = q === void 0 ? [] : q;
    return this.parent = window, this.frame = document.createElement("iframe"), this.frame.name = D || "", this.frame.classList.add.apply(this.frame.classList, $), d.appendChild(this.frame), this.child = this.frame.contentWindow || this.frame.contentDocument.parentWindow, this.model = S || {}, this.sendHandshake(L);
  }
  var a = A.prototype;
  return a.sendHandshake = function(h) {
    var d = this, S = _r(h), L = 0, D;
    return new A.Promise(function(q, $) {
      var oe = function ue(de) {
        return Ct(de, S) ? de.data.postmate === "handshake-reply" ? (clearInterval(D), process.env.NODE_ENV !== "production" && se("Parent: Received handshake reply from Child"), d.parent.removeEventListener("message", ue, !1), d.childOrigin = de.origin, process.env.NODE_ENV !== "production" && se("Parent: Saving Child origin", d.childOrigin), q(new tf(d))) : (process.env.NODE_ENV !== "production" && se("Parent: Invalid handshake reply"), $("Failed handshake")) : !1;
      };
      d.parent.addEventListener("message", oe, !1);
      var be = function() {
        L++, process.env.NODE_ENV !== "production" && se("Parent: Sending handshake attempt " + L, {
          childOrigin: S
        }), d.child.postMessage({
          postmate: "handshake",
          type: Oe,
          model: d.model
        }, S), L === Gr && clearInterval(D);
      }, Ie = function() {
        be(), D = setInterval(be, 500);
      };
      d.frame.attachEvent ? d.frame.attachEvent("onload", Ie) : d.frame.onload = Ie, process.env.NODE_ENV !== "production" && se("Parent: Loading frame", {
        url: h
      }), d.frame.src = h;
    });
  }, A;
}();
ve.debug = !1;
ve.Promise = function() {
  try {
    return window ? window.Promise : Promise;
  } catch {
    return null;
  }
}();
ve.Model = /* @__PURE__ */ function() {
  function A(o) {
    return this.child = window, this.model = o, this.parent = this.child.parent, this.sendHandshakeReply();
  }
  var a = A.prototype;
  return a.sendHandshakeReply = function() {
    var h = this;
    return new ve.Promise(function(d, S) {
      var L = function D(q) {
        if (q.data.postmate) {
          if (q.data.postmate === "handshake") {
            process.env.NODE_ENV !== "production" && se("Child: Received handshake from Parent"), h.child.removeEventListener("message", D, !1), process.env.NODE_ENV !== "production" && se("Child: Sending handshake reply to Parent"), q.source.postMessage({
              postmate: "handshake-reply",
              type: Oe
            }, q.origin), h.parentOrigin = q.origin;
            var $ = q.data.model;
            return $ && (Object.keys($).forEach(function(oe) {
              h.model[oe] = $[oe];
            }), process.env.NODE_ENV !== "production" && se("Child: Inherited and extended model from Parent")), process.env.NODE_ENV !== "production" && se("Child: Saving Parent origin", h.parentOrigin), d(new rf(h));
          }
          return S("Handshake Reply Failed");
        }
      };
      h.child.addEventListener("message", L, !1);
    });
  }, A;
}();
const ff = "https://mizu.io", nf = () => {
  const A = document.createElement("style");
  A.innerHTML = `
	  .mizu-wallet-frame {
		position: fixed;
		top: 0;
		left: 0;
		width: 100vw;
		height: 100vh;
		border: none;
		z-index: 999999999;
		inset: 0px;
		color-scheme: light;
	  }
	`, document.head.appendChild(A);
};
class af {
  /**
   *
   * @param args.manifestURL Manifest URL
   */
  constructor(a) {
    te(this, "authCode");
    te(this, "manifestURL");
    te(this, "network");
    te(this, "mizuClient");
    te(this, "provider");
    te(this, "origin");
    if (!a.manifestURL) throw new Error("manifestURL is required");
    this.authCode = "", this.manifestURL = a.manifestURL, this.network = a.network, this.mizuClient = a.mizuClient, this.origin = ff, nf();
  }
  async connect() {
    const a = await new ve({
      container: document.body,
      // Element to inject frame into
      url: `${this.origin}/wallet/checkLogin?network=${this.network}`,
      name: "mizu-wallet-login",
      classListArray: ["mizu-wallet-frame", "mizu-wallet-login-frame"],
      model: {
        manifestURL: this.manifestURL,
        network: this.network,
        appId: this.mizuClient.appId
      }
    });
    return a.on("close-frame", () => {
      a.destroy();
    }), new Promise((o, h) => {
      a.on("login", (d) => {
        this.authCode = d.code, o({
          address: d.address,
          publicKey: ""
        });
      });
    });
  }
  async disconnect() {
    var o;
    const a = await new ve({
      container: document.body,
      // Element to inject frame into
      url: `${this.origin}/wallet/logout?network=${this.network}`,
      name: "mizu-wallet-logout",
      classListArray: ["mizu-wallet-frame", "mizu-wallet-logout-frame"],
      model: {
        manifestURL: this.manifestURL,
        network: this.network,
        appId: this.mizuClient.appId
      }
    });
    a.on("close-frame", () => {
      a.destroy();
    }), await ((o = this.mizuClient) == null ? void 0 : o.logout());
  }
  async signAndSubmitTransaction(a) {
    var o;
    try {
      const h = await ((o = this.mizuClient) == null ? void 0 : o.createOrderWithCode({
        code: this.authCode,
        payload: a
      }));
      if (!h) throw new Error("Transaction creation failed");
      const d = await new ve({
        container: document.body,
        // Element to inject frame into
        url: `${this.origin}/wallet/checkLogin?redirect_url=${encodeURIComponent("/wallet/transaction")}&network=${this.network}`,
        name: "mizu-wallet-login",
        classListArray: ["mizu-wallet-frame", "mizu-wallet-sign-frame"],
        model: {
          manifestURL: this.manifestURL,
          network: this.network,
          appId: this.mizuClient.appId,
          transactionInfo: {
            orderId: h,
            payload: a
          }
        }
      });
      return d.on("close-frame", () => {
        d.destroy();
      }), d.on("cancel", () => {
        throw new Error("User Canceled");
      }), new Promise((S, L) => {
        d.on("submitted", (D) => {
          var q, $, oe;
          if (D.error)
            return L(D.error);
          S({
            hash: ((oe = ($ = (q = D.transactions) == null ? void 0 : q.filter((be) => be.type === 2)) == null ? void 0 : $[0]) == null ? void 0 : oe.hash) || ""
          });
        });
      });
    } catch (h) {
      throw console.error(h), h;
    }
  }
}
class xf {
  constructor(a) {
    te(this, "url", Ur);
    te(this, "version", "1.0.0");
    te(this, "name", mr);
    te(this, "icon", Ir);
    te(this, "chains", pr);
    te(this, "accounts", []);
    te(this, "provider");
    te(this, "mizuClient");
    te(this, "telegramMiniAppHelper");
    te(this, "websiteHelper");
    te(this, "accountInfo");
    te(this, "account", async () => this.accountInfo || {
      address: "",
      publicKey: ""
    });
    te(this, "connect", async () => {
      var a;
      try {
        if (Ut)
          if (this.telegramMiniAppHelper)
            this.accountInfo = await this.telegramMiniAppHelper.connect();
          else
            throw new Error(`${It.CONNECT} Please pass a valid manifestURL`);
        else
          this.accountInfo = await ((a = this.websiteHelper) == null ? void 0 : a.connect());
        return {
          args: {
            ...this.accountInfo
          },
          status: Fe.APPROVED
        };
      } catch {
        return {
          status: Fe.REJECTED
        };
      }
    });
    te(this, "network", async () => ({
      name: this.provider.network,
      chainId: this.provider.network === "mainnet" ? 1 : 2
    }));
    te(this, "disconnect", async () => {
      var a, o;
      try {
        Ut ? await ((a = this.telegramMiniAppHelper) == null ? void 0 : a.disconnect()) : await ((o = this.websiteHelper) == null ? void 0 : o.disconnect());
      } catch (h) {
        throw h;
      }
    });
    te(this, "signTransaction", async (a, o) => {
      throw console.log(a, o), new vt(tt.InternalError);
    });
    te(this, "signAndSubmitTransaction", async (a) => {
      var o, h;
      try {
        let d = {};
        return Ut ? d = await ((o = this.telegramMiniAppHelper) == null ? void 0 : o.signAndSubmitTransaction(a.payload)) : d = await ((h = this.websiteHelper) == null ? void 0 : h.signAndSubmitTransaction(a.payload)), d != null && d.hash ? {
          args: d,
          status: Fe.APPROVED
        } : {
          status: Fe.REJECTED
        };
      } catch (d) {
        throw console.error(d.message || d), new vt(tt.InternalError);
      }
    });
    te(this, "signMessage", async (a) => {
      throw console.log(a), new vt(tt.InternalError);
    });
    te(this, "onAccountChange", async () => Promise.resolve());
    te(this, "onNetworkChange", async () => Promise.resolve());
    if (!a.network) throw new Error("MizuWallet: network is required");
    this.mizuClient = new hr({
      appId: a.appId || Er(a.network),
      network: a.network
    }), this.provider = {
      network: a.network,
      address: ""
    }, a != null && a.manifestURL && (this.telegramMiniAppHelper = new Wr({
      manifestURL: a == null ? void 0 : a.manifestURL,
      network: a.network
    })), this.websiteHelper = new af({
      manifestURL: a.manifestURL,
      network: a.network,
      mizuClient: this.mizuClient
    });
  }
  get features() {
    return {
      "aptos:connect": {
        version: "1.0.0",
        connect: this.connect
      },
      "aptos:network": {
        version: "1.0.0",
        network: this.network
      },
      "aptos:disconnect": {
        version: "1.0.0",
        disconnect: this.disconnect
      },
      "aptos:signTransaction": {
        version: "1.0.0",
        signTransaction: this.signTransaction
      },
      "aptos:signAndSubmitTransaction": {
        version: "1.1.0",
        signAndSubmitTransaction: this.signAndSubmitTransaction
      },
      "aptos:signMessage": {
        version: "1.0.0",
        signMessage: this.signMessage
      },
      "aptos:onAccountChange": {
        version: "1.0.0",
        onAccountChange: this.onAccountChange
      },
      "aptos:onNetworkChange": {
        version: "1.0.0",
        onNetworkChange: this.onNetworkChange
      },
      "aptos:account": {
        version: "1.0.0",
        account: this.account
      }
    };
  }
}
export {
  xf as MizuWallet
};
